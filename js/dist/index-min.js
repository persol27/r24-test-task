"use strict";window.addEventListener("load",()=>{document.querySelector(".main").classList.remove("main_no-load")}),jQuery(document).ready(t=>{const e={width:48,height:48,position:"",selector:".circle_target",set_sizes(){let t=document.querySelector(this.selector);this.width=t.offsetWidth,this.height=t.offsetHeight},resize(){this.draggable.options.limit.x=[0,s.get_sizes().w-this.width],this.draggable.options.limit.y=[0,s.get_sizes().h-this.height]},init(){this.position=i.coords,this.set_sizes();let t=document.querySelector(this.selector),e={limit:{x:[0,s.get_sizes().w-this.width],y:[0,s.get_sizes().h-this.height]},onDrag:(t,e,s)=>{i.set("x",e,"event"),i.set("y",s,"event")}};this.draggable=new Draggable(t,e),console.log(this.draggable)}},s={src:"",position:"",selector:".slide-image",set_src(e,s){s?(t(this.selector).animate({opacity:0},225),setTimeout(()=>t(this.selector).attr("src",e),250),setTimeout(()=>t(this.selector).animate({opacity:1},300),325)):t(this.selector).attr("src",e)},get_sizes(){let t=document.querySelector(this.selector);return{w:t.offsetWidth,h:t.offsetHeight}},init(){this.src=o.default_src,this.position=i.coords,this.set_src(this.src,!1)}},i={coords:{x:0,y:0},min:{x:0,y:0},max:{x:0,y:0},selector:".position_target",coords_reset(){const s=[{coord:"x",value:0,css_attr:"left"},{coord:"y",value:0,css_attr:"top"}];for(let i=0;i<s.length;i++){let o=s[i];this.coords[o.coord]=o.value,t(e.selector).css(o.css_attr,"unset"),t(this.selector).find(`.position__input[name=position_${o.coord}]`).val("")}},set(i,o,a){let r=o;"x"==i?(r=r)>this.max.x?r=this.max.x:r<this.min.x&&(r=this.min.x):"y"==i&&((r=Math.round(s.get_sizes().h-r-e.height))>this.max.y?r=s.get_sizes().h+this.max.y+e.height:r<this.min.y&&(r=s.get_sizes().h+this.min.y+e.height)),this.coords[i]=Math.round(r),"event"!==a&&(console.log(this.coords),e.draggable.set(this.coords.x,this.coords.y)),"event"!=a&&"resize"!=a||t(this.selector).find(`.position__input[name=position_${i}]`).val(this.coords[i])},events(){t(this.selector).on("input propertychange change",".position__input",e=>{let s=t(e.target),i=s.attr("name").split("_"),o=s.val();this.set(i[1],o,"input")}),t(window).resize(()=>{e.resize(),this.set_max(),setTimeout(()=>{let e=t(this.selector).find(".position__input[name=position_x]"),s=t(this.selector).find(".position__input[name=position_y]");this.set("x",e.val(),"resize"),this.set("y",s.val(),"resize")},75)})},set_max(){let i=t(this.selector).find(".position__input[name=position_x]"),o=t(this.selector).find(".position__input[name=position_y]");this.max={x:Math.ceil(s.get_sizes().w-e.width),y:Math.ceil(s.get_sizes().h-e.height)},i.attr("max",this.max.x).attr("min",this.min.x),o.attr("max",this.max.y).attr("min",this.min.y)},init(){setTimeout(()=>{this.set_max(),this.events()},50)}},o={options:[{name:"Material 1",src:"images/material/1.jpg",thumb_src:"images/material_thumb/1_32x32.jpg"},{name:"Material 2",src:"images/material/2.jpg",thumb_src:"images/material_thumb/2_32x32.jpg"},{name:"Material 3",src:"images/material/3.jpg",thumb_src:"images/material_thumb/3_32x32.jpg"},{name:"Material 4",src:"images/material/4.jpg",thumb_src:"images/material_thumb/4_32x32.jpg"},{name:"Material 5",src:"images/material/5.jpg",thumb_src:"images/material_thumb/5_32x32.jpg"}],default_src:"",position:"",selector:".material-select",templateSelect:e=>e.id?t('<img src="'+e.element.getAttribute("data-thumb")+'" class="img-thumb" > <span>'+e.text+"</span>"):e.text,eventsSelect(){t(this.selector).on("select2:open",t=>{}).on("select2:select",t=>s.set_src(t.params.data.id,!0))},init(){this.default_src=this.options[0].src,this.position=i.coords;for(let e=0;e<this.options.length;e++){let s="material-select__item material-option";t(this.selector).append(`<option class="${s}" value="${this.options[e].src}" data-thumb="${this.options[e].thumb_src}">${this.options[e].name}</option>`)}const e=this.templateSelect;t(this.selector).select2({selectionCssClass:"select2-menu",dropdownCssClass:"select2-menu-dropdown",width:250,minimumResultsForSearch:1/0,templateResult:e,templateSelection:e}),this.eventsSelect()}};(t=>t.forEach(t=>t.init()))([i,o,s,e])});