"use strict";window.addEventListener("load",()=>{document.querySelector(".main").classList.remove("main_no-load"),/iP(hone|ad)/.test(window.navigator.userAgent)&&document.body.addEventListener("touchstart",()=>{},!1)}),jQuery(document).ready(t=>{const e={width:48,height:48,position:"",selector:".circle_target",set_sizes(){let t=document.querySelector(this.selector);this.width=t.offsetWidth,this.height=t.offsetHeight},resize(){this.draggable.options.limit.x=[0,i.get_sizes().w-this.width],this.draggable.options.limit.y=[0,i.get_sizes().h-this.height]},init(){this.position=s.coords,this.set_sizes();let e=document.querySelector(this.selector),a={limit:{x:[0,i.get_sizes().w-this.width],y:[0,i.get_sizes().h-this.height]},onDrag:(t,e,i)=>{s.set("x",e,"event"),s.set("y",i,"event")},onDragStart:(e,i,s)=>{t(this.selector).addClass("active")},onDragEnd:(e,i,s)=>{t(this.selector).removeClass("active")}};this.draggable=new Draggable(e,a)}},i={src:"",position:"",selector:".slide-image",set_src(e,i){i?t(this.selector).animate({opacity:0},200,()=>{t(this.selector).css("background-image",`url(${e})`),t(this.selector).animate({opacity:1},400)}):t(this.selector).css("background-image",`url(${e})`)},get_sizes(){let t=document.querySelector(this.selector);return{w:t.offsetWidth,h:t.offsetHeight}},init(){this.src=a.default_src,this.position=s.coords,this.set_src(this.src,!1)}},s={coords:{x:0,y:0},min:{x:0,y:0},max:{x:0,y:0},selector:".position_target",set(s,a,o){let n=Number(a);"x"==s?(n>this.max.x?n=this.max.x:n<this.min.x&&(n=this.min.x),"input"==o&&t(this.selector).find(`.position__input[name=position_${s}]`).val(Math.round(n))):"y"==s&&((n="resize"!==o?i.get_sizes().h-n-e.height:n)>this.max.y?(n=this.max.y,t(this.selector).find(`.position__input[name=position_${s}]`).val(this.min.y)):n<this.min.y&&(n=this.min.y,t(this.selector).find(`.position__input[name=position_${s}]`).val(this.max.y))),this.coords[s]=Math.round(n),"event"!==o&&e.draggable.set(this.coords.x,this.coords.y),"input"!==o&&t(this.selector).find(`.position__input[name=position_${s}]`).val(this.coords[s])},events(){t(this.selector).on("input propertychange",".position__input",e=>{let i=t(e.target),s=i.attr("name").split("_"),a=i.val();this.set(s[1],a,"input")}),t(window).resize(()=>{let s=this.max,a=this.coords;setTimeout(()=>{this.set_max(),e.resize();let o=Math.round(a.x/(s.x/100)),n=Math.round(a.y/(s.y/100));console.log(this.max.y);let r=Math.round(this.max.x/100*o),h=Math.round(this.max.y/100*n);e.draggable.set(r,i.get_sizes().h-h-e.height),t(this.selector).find(".position__input[name=position_x]").val(r),t(this.selector).find(".position__input[name=position_y]").val(h)},25)})},set_max(){let s=t(this.selector).find(".position__input[name=position_x]"),a=t(this.selector).find(".position__input[name=position_y]");this.max={x:Math.ceil(i.get_sizes().w-e.width),y:Math.ceil(i.get_sizes().h-e.height)},s.attr("max",this.max.x).attr("min",this.min.x),a.attr("max",this.max.y).attr("min",this.min.y)},init(){setTimeout(()=>{this.set_max(),this.events()},50)}},a={options:[{name:"Material 1",src:"images/material/1.jpg",thumb_src:"images/material_thumb/1_32x32.jpg"},{name:"Material 2",src:"images/material/2.jpg",thumb_src:"images/material_thumb/2_32x32.jpg"},{name:"Material 3",src:"images/material/3.jpg",thumb_src:"images/material_thumb/3_32x32.jpg"},{name:"Material 4",src:"images/material/4.jpg",thumb_src:"images/material_thumb/4_32x32.jpg"},{name:"Material 5",src:"images/material/5.jpg",thumb_src:"images/material_thumb/5_32x32.jpg"}],default_src:"",position:"",selector:".material-select",templateSelect:e=>e.id?t('<img src="'+e.element.getAttribute("data-thumb")+'" class="img-thumb" > <span>'+e.text+"</span>"):e.text,eventsSelect(){t(this.selector).on("select2:open",e=>{t(".select2-menu-dropdown").css("opacity",0).animate({opacity:1},275)}).on("select2:select",t=>i.set_src(t.params.data.id,!0))},init(){this.default_src=this.options[0].src,this.position=s.coords;for(let e=0;e<this.options.length;e++){let i="material-select__item material-option";t(this.selector).append(`<option class="${i}" value="${this.options[e].src}" data-thumb="${this.options[e].thumb_src}">${this.options[e].name}</option>`)}t(this.selector).select2({selectionCssClass:"select2-menu",dropdownCssClass:"select2-menu-dropdown",width:250,minimumResultsForSearch:1/0,templateResult:this.templateSelect,templateSelection:this.templateSelect}),this.eventsSelect()}};(t=>t.forEach(t=>t.init()))([s,a,i,e])});